<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.19">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>深入浅出回溯算法：通俗易懂 + 代码详解 | Ryan的个人网站</title><meta name="description" content="欢迎访问Ryan的个人网站，这里分享最新的软件开发技巧、编程项目和技术文章，帮助您提升开发技能。关注我们，获取实用的实战项目、开发教程及更多技术资源">
    <link rel="preload" href="/assets/style-CSlcUTs1.css" as="style"><link rel="stylesheet" href="/assets/style-CSlcUTs1.css">
    <link rel="modulepreload" href="/assets/app-D4UOOi8i.js"><link rel="modulepreload" href="/assets/shenruqianchuhuisusuanfa.html-t1Q9aIhy.js">
    <link rel="prefetch" href="/assets/timeline.html-dyfU_gtq.js" as="script"><link rel="prefetch" href="/assets/posts.html-CJ_1pmv4.js" as="script"><link rel="prefetch" href="/assets/friendship-link.html-wx45y8PT.js" as="script"><link rel="prefetch" href="/assets/1.html-UlVJx-ob.js" as="script"><link rel="prefetch" href="/assets/1.html-OsTLPbka.js" as="script"><link rel="prefetch" href="/assets/1.html-BmpwHl7k.js" as="script"><link rel="prefetch" href="/assets/1.html-DEAEZfxW.js" as="script"><link rel="prefetch" href="/assets/1.html-399k3p2H.js" as="script"><link rel="prefetch" href="/assets/1.html-B_4T2o8c.js" as="script"><link rel="prefetch" href="/assets/1.html-CaDseGfB.js" as="script"><link rel="prefetch" href="/assets/1.html-p_Jt52jg.js" as="script"><link rel="prefetch" href="/assets/1.html-Cow3AnN_.js" as="script"><link rel="prefetch" href="/assets/1.html-CB97Uj94.js" as="script"><link rel="prefetch" href="/assets/1.html-E9VVpKYE.js" as="script"><link rel="prefetch" href="/assets/1.html-BqI_BlIX.js" as="script"><link rel="prefetch" href="/assets/1.html-BdajPxNt.js" as="script"><link rel="prefetch" href="/assets/1.html-C-GngcSI.js" as="script"><link rel="prefetch" href="/assets/1.html-BvBn58MZ.js" as="script"><link rel="prefetch" href="/assets/1.html-BZdEt9TY.js" as="script"><link rel="prefetch" href="/assets/1.html-WKcdKKT3.js" as="script"><link rel="prefetch" href="/assets/1.html-BgajQy6v.js" as="script"><link rel="prefetch" href="/assets/1.html-DKp6Sip_.js" as="script"><link rel="prefetch" href="/assets/1.html-DmhbrRMk.js" as="script"><link rel="prefetch" href="/assets/1.html-B82QTMXf.js" as="script"><link rel="prefetch" href="/assets/1.html-jmW8ydFF.js" as="script"><link rel="prefetch" href="/assets/1.html-ClWEeEfQ.js" as="script"><link rel="prefetch" href="/assets/1.html-DSHBidY0.js" as="script"><link rel="prefetch" href="/assets/1.html-DcHgMGVC.js" as="script"><link rel="prefetch" href="/assets/1.html-DNdJs7jW.js" as="script"><link rel="prefetch" href="/assets/1.html-UXpzougI.js" as="script"><link rel="prefetch" href="/assets/1.html-BtaHNQtc.js" as="script"><link rel="prefetch" href="/assets/1.html-GR9jCRiF.js" as="script"><link rel="prefetch" href="/assets/1.html-qGc4cLLk.js" as="script"><link rel="prefetch" href="/assets/1.html-DN6RmTPa.js" as="script"><link rel="prefetch" href="/assets/1.html-DE0zRkRa.js" as="script"><link rel="prefetch" href="/assets/2.html-DAMp2nDz.js" as="script"><link rel="prefetch" href="/assets/3.html-D0n8FI0Q.js" as="script"><link rel="prefetch" href="/assets/index.html-BFLZEQCT.js" as="script"><link rel="prefetch" href="/assets/AI Agent、MCPheFunction Callingyuanliqianxi.html-D69g2QjE.js" as="script"><link rel="prefetch" href="/assets/PromiseyuAsyncheAwaitshixianyuanlixiangjie.html-BJ9DhEIm.js" as="script"><link rel="prefetch" href="/assets/jsmokuaihuajizhidefazhan.html-BVCOJ-qN.js" as="script"><link rel="prefetch" href="/assets/keep-aliveyuanlijiexi.html-3TCSIETs.js" as="script"><link rel="prefetch" href="/assets/next.jsshangshouzhinan.html-CgbE3HJ8.js" as="script"><link rel="prefetch" href="/assets/reactjichuzhishizongjie.html-DFoZZ7hq.js" as="script"><link rel="prefetch" href="/assets/three.jsrumenzhinan.html--8gEFO7R.js" as="script"><link rel="prefetch" href="/assets/shenrulijie CSS zhongde BFC he IFC：bujudehexinjizhi.html-DCK2hydb.js" as="script"><link rel="prefetch" href="/assets/shenrulijiejsyibubiancheng，congyuanlidaoshijian.html-D_YIS9Jk.js" as="script"><link rel="prefetch" href="/assets/shenrulijiejsbibao.html-BUWZo6NG.js" as="script"><link rel="prefetch" href="/assets/xunidomhediffsuanfaxiangjie.html-FeoOpzVT.js" as="script"><link rel="prefetch" href="/assets/Dockerrumen.html-7omYclG3.js" as="script"><link rel="prefetch" href="/assets/pythonjichuyufazongjie.html-aMbh4g5u.js" as="script"><link rel="prefetch" href="/assets/bendidajianpythonkaifahuanjing.html-BuyX8nzx.js" as="script"><link rel="prefetch" href="/assets/webpackheviteyuanliqianxi.html-Cw6sl7Us.js" as="script"><link rel="prefetch" href="/assets/ruhefengzhuangyigezhichihuancundeqingqiufangfa.html-BlwJfq2c.js" as="script"><link rel="prefetch" href="/assets/tishengqianduankaifaxiaolvdeshijian.html-Ca9AYADD.js" as="script"><link rel="prefetch" href="/assets/denglutaixuqian.html-B5aVnPn0.js" as="script"><link rel="prefetch" href="/assets/cursorshiyongxinde.html-BDHI-dZ5.js" as="script"><link rel="prefetch" href="/assets/kuayudeyuanyinhejiejuefangan.html-CYfGIqhv.js" as="script"><link rel="prefetch" href="/assets/fupeng2024nianHSBCyanjiangguandianshuli.html-0QRk5u7V.js" as="script"><link rel="prefetch" href="/assets/2024nianzhongzongjie.html-B530tWFF.js" as="script"><link rel="prefetch" href="/assets/yirujiwang.html-BW7OzYMc.js" as="script"><link rel="prefetch" href="/assets/qianduanchengxuyuanzhiyesikao.html-gWVyj2gH.js" as="script"><link rel="prefetch" href="/assets/myself.html-BrDr6o9Y.js" as="script"><link rel="prefetch" href="/assets/404.html-CzcB-j2w.js" as="script"><link rel="prefetch" href="/assets/Valine.min-_LyT3bfY.js" as="script"><link rel="prefetch" href="/assets/giscus-aTimukGI-DWEKOTfS.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container series--no show-catalog"><header class="navbar-container not-open"><div class="navbar-inner"><div class="site-brand nav-item"><img class="logo" src="/logo.png" alt="Ryan的个人网站"><a href="/" class="site-name can-hide">Ryan的个人网站</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link" aria-label="首页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->首页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/gongjulian/1.html" class="link" aria-label="分类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->分类<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/tags/gongjulian/1.html" class="link" aria-label="标签"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->标签<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/timeline.html" class="link" aria-label="归档"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->归档<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="文档"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->文档<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="文档"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->文档<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/docs/introduce/myself" class="link" aria-label="关于我"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->关于我<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a class="link" href="https://github.com/au-to" target="_blank" rel="noopener noreferrer" aria-label="github"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->github<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--><!----><span class="xicon-container btn-toggle-dark-mode btn--dark-mode navbar-links__item"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><ul class="social-links navbar-links__item"><!--[--><!--]--></ul></nav><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></div></header><!----><!----><!----><div class="theme-main" style=""><!----><!--[--><main class="page-container"><div class="page-content"><h1 class="page-title">深入浅出回溯算法：通俗易懂 + 代码详解</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Ryan<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2025/03/26<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/categories/shujujiegouyusuanfa/1.html" class="">数据结构与算法</a><!--]--><!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/tags/suanfa/1.html" class="">算法</a><!--]--><!--]--></span></span><!----></div><div class="theme-reco-md-content"><div><h2 id="什么是回溯算法" tabindex="-1"><a class="header-anchor" href="#什么是回溯算法"><span>什么是回溯算法</span></a></h2><p>回溯（Backtracking）是一种暴力搜索方法，常用于解决排列、组合、子集、图遍历等问题。 它的本质是 <strong>递归 + 试探 + 回退</strong>：</p><ol><li><strong>递归</strong>：尝试所有可能的解。</li><li><strong>试探</strong>：当前选择是否符合条件？</li><li><strong>回退</strong>：如果当前选择不符合，撤销选择，尝试别的可能性。</li></ol><p>你可以把回溯算法想象成一个聪明但有点啰嗦的尝试过程，它会穷举所有可能的方案，找到符合条件的答案。</p><p>例如，在游戏闯关（探索迷宫）中：</p><p>想象你在一个迷宫里找出口，每个路口可以选择向左、向右、向前。</p><ul><li>你不知道出口在哪，所以只能每条路都试一试。</li><li>走到死路了，就退回上一步，换一条路试试。</li><li>如果某条路能走通，就继续前进，直到找到出口。</li></ul><p>回溯就像一个不断 <strong>尝试 → 撤销 → 再尝试</strong> 的过程，直到找到所有可行的路线！</p><hr><h2 id="回溯的基本框架" tabindex="-1"><a class="header-anchor" href="#回溯的基本框架"><span>回溯的基本框架</span></a></h2><p>回溯算法通常以<strong>树形结构</strong>进行搜索，每个节点代表一种选择。</p><p><strong>标准回溯模板：</strong></p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">backtrack</span><span class="token punctuation">(</span>路径<span class="token punctuation">,</span> 选择列表<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>满足结束条件<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    记录结果<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">for</span> <span class="token punctuation">(</span>选择 <span class="token keyword">of</span> 选择列表<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    做选择<span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">backtrack</span><span class="token punctuation">(</span>新的路径<span class="token punctuation">,</span> 新的选择列表<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    撤销选择<span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>路径</strong>：已经做出的选择。</li><li><strong>选择列表</strong>：当前可以做的选择。</li><li><strong>结束条件</strong>：是否满足题目要求。</li></ul><hr><h2 id="经典例子-全排列" tabindex="-1"><a class="header-anchor" href="#经典例子-全排列"><span>经典例子：全排列</span></a></h2><p><strong>题目</strong>：给定一个不含重复数字的数组 <code>nums</code>，返回它的所有可能的排列。</p><p><strong>代码实现：</strong></p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">permute</span><span class="token punctuation">(</span>nums<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> res<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> path<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> used<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">function</span> <span class="token function">backtrack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">      path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token function">backtrack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token function">backtrack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span> res<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">permute</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>代码拆解</strong></p><p><strong>递归终止的条件</strong></p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>当 <code>path</code> 的长度等于 <code>nums</code> 长度，说明已经选完所有元素，构成一个完整排列。</li><li>复制 <code>path</code> 到 <code>res</code>，然后返回，不再继续递归。</li></ul><p><strong><code>for</code> 循环遍历所有可能的选择</strong></p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>我们要尝试每个数是否能放入 <code>path</code>。</li><li>如果 <code>nums[i]</code> 已经在 <code>path</code> 里了（<code>used[i] === true</code>），就跳过。</li></ul><p><strong>选择当前数字，递归进入下一层</strong></p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 选择 nums[i]</span></span>
<span class="line">used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 标记为已使用</span></span>
<span class="line"><span class="token function">backtrack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 递归进入下一层</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>选择 <code>nums[i]</code> 并加入 <code>path</code>，然后进入下一层递归，继续选择下一个数字。</li></ul><p><strong>回溯（撤销选择）</strong></p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 撤销选择</span></span>
<span class="line">used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 标记为未使用</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>撤销 <code>path</code> 的最后一个数字，相当于回退一步，尝试其他可能。</li><li>恢复 <code>used[i]</code> 的状态，让 <code>nums[i]</code> 重新可用。</li></ul><hr><p><strong>递归执行的过程</strong></p><div class="language-scss line-numbers-mode" data-highlighter="prismjs" data-ext="scss" data-title="scss"><pre><code><span class="line"><span class="token punctuation">(</span>开始<span class="token punctuation">)</span></span>
<span class="line"> ├── 1</span>
<span class="line"> │   ├── 2</span>
<span class="line"> │   │   ├── 3 ✅ [1<span class="token punctuation">,</span>2<span class="token punctuation">,</span>3]</span>
<span class="line"> │   │   ├── 回溯（撤销3）</span>
<span class="line"> │   ├── 3</span>
<span class="line"> │   │   ├── 2 ✅ [1<span class="token punctuation">,</span>3<span class="token punctuation">,</span>2]</span>
<span class="line"> │   │   ├── 回溯（撤销2）</span>
<span class="line"> │   ├── 回溯（撤销1）</span>
<span class="line"> ├── 2</span>
<span class="line"> │   ├── 1</span>
<span class="line"> │   │   ├── 3 ✅ [2<span class="token punctuation">,</span>1<span class="token punctuation">,</span>3]</span>
<span class="line"> │   │   ├── 回溯（撤销3）</span>
<span class="line"> │   ├── 3</span>
<span class="line"> │   │   ├── 1 ✅ [2<span class="token punctuation">,</span>3<span class="token punctuation">,</span>1]</span>
<span class="line"> │   │   ├── 回溯（撤销1）</span>
<span class="line"> │   ├── 回溯（撤销2）</span>
<span class="line"> ├── 3</span>
<span class="line"> │   ├── 1</span>
<span class="line"> │   │   ├── 2 ✅ [3<span class="token punctuation">,</span>1<span class="token punctuation">,</span>2]</span>
<span class="line"> │   │   ├── 回溯（撤销2）</span>
<span class="line"> │   ├── 2</span>
<span class="line"> │   │   ├── 1 ✅ [3<span class="token punctuation">,</span>2<span class="token punctuation">,</span>1]</span>
<span class="line"> │   │   ├── 回溯（撤销1）</span>
<span class="line"> │   ├── 回溯（撤销3）</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最终结果：</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p><strong>回溯的核心思想</strong>：</p><ol><li><strong>做选择</strong>：从 <code>nums</code> 中选一个未使用的数，加入 <code>path</code>。</li><li><strong>递归进入下一层</strong>：继续选择下一个数。</li><li><strong>回溯（撤销选择）</strong>：撤销上一步的选择，恢复状态，尝试其他可能。</li></ol><p><strong>适用于所有排列/组合问题：</strong></p><ul><li><strong>排列</strong>：<code>permute([1,2,3]) → n!</code></li><li><strong>组合</strong>：<code>C(n,k)</code> → 选出 <code>k</code> 个数的所有组合。</li><li><strong>子集</strong>：所有可能的选取方式。</li><li><strong>数独求解、八皇后问题</strong> 也都可以用回溯解决！</li></ul></div></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->最后更新时间 3/29/2025, 9:05:11 AM<!--]--></span></span></div></footer><!----><div class="reco-giscus-wrapper"><!----></div></div><div class="page-catalog-container"><h5 class="tip">目录</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/shujujiegouyusuanfa/shenruqianchuhuisusuanfa.html#什么是回溯算法" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="什么是回溯算法"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->什么是回溯算法<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/shujujiegouyusuanfa/shenruqianchuhuisusuanfa.html#回溯的基本框架" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="回溯的基本框架"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->回溯的基本框架<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/shujujiegouyusuanfa/shenruqianchuhuisusuanfa.html#经典例子-全排列" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="经典例子：全排列"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->经典例子：全排列<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/shujujiegouyusuanfa/shenruqianchuhuisusuanfa.html#总结" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="总结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->总结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--></ul></div></main><!--]--></div></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-D4UOOi8i.js" defer></script>
  </body>
</html>
